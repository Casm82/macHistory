# macHistory
Собирает статистику MAC адресов на портах коммутаторов по SNMP и сохраняет историю в БД.

Метод работает для коммутаров, которые отдают через snmp данные портах при запросе к oid .1.3.6.1.2.1.17.4.3.1.2 (таблица MAC-адресов) и .1.3.6.1.2.1.17.4.3.1.3 (статус интерфейсов).

Проверено на Cisco 2960.

# Требования:
* Node.js
* MongoDB
* поддерживает аутентификацию через SPNEGO (нужно сгенерировать kerberos.keytab и перед запуском экспортировать переменную окружения KRB5_KTNAME=<путь>/kerberos.keytab)

# Настройка
* Прописать корневой концентратор
* Запустить web-сервер node app.js
* Зайти в настройку vlan - получить список vlan с него
* Добавить в настройках коммутаторы
* Проверить коммутаторы на доступность через snmp
* Запустить сбор MAC адресов через web-интерфейс или отправив POST запрос с самого сервера
```
сurl -sk -X POST 'https://127.0.0.1:3002/collectMAC' -d "collectMAC"
```
